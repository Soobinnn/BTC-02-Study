# **이클립스 공격**

**이클립스 공격(Eclipse Attack)**은 공격자가 네트워크 상의 노드를 방해하기 위한 공격으로, 정교한 공격을 준비하기 위해 네트워크에 혼란을 야기시킬 때 주로 사용합니다.

이클립스 공격은 전체 네트워크를 공격하기 보다는 특정 노드를 격리시켜 정직한 다른 노드로부터 정보를 수신받지 못하게 여러 악의적인 공격자 노드가 네트워크를 독점합니다. 이 공격 노드들은 가짜 트랜잭션이 담긴 블록을 격리한 노드들에게 브로드캐스트하여 이중 지불 공격을 가능하도록 만듭니다.

## **이클립스 공격 동작방식**

블록체인에서 노드는 다른 노드들과 동시적으로 연결될 수 없으며, 대신 제한된 인접 노드들과 연결되어 있습니다. 노드들이 데이터를 공유할 때는 모두가 동시에 공유하는 것이 아니라, 하나의 노드에서 주변 노드로 점점 퍼져나가는 브로드캐스트 방식을 사용합니다.

공격자는 공격 대상의 이웃 노드들을 자신의 노드로 구성하여, 공격 대상 노드가 가짜 트랜잭션이 담긴 블록을 받도록 합니다.

이를 통해 다음과 같은 공격 효과가 발생합니다.

### **엔지니어링 블록 레이스(Engineering Block Races)**

블록 레이스는 채굴 노드들이 가장 먼저 유효한 논스 값을 찾아 블록을 생성하는 경쟁을 의미합니다. 이클립스 공격에서는 이클립스 공격 대상 노드와 공격자의 노드가 동시에 블록을 생성한 경우, 공격 대상 노드가 생성한 블록을 숨김으로써 해당 블록은 고아 블록이 되고, 자신의 블록이 네트워크에 올라갈 수 있도록 합니다.

### **채굴 파워 분할(Splitting Mining Power)**

공격자가 51% 공격을 하기 위해 네트워크의 전체 채굴 파워를 쪼갤 수도 있습니다. 이러한 방식으로 공격자의 채굴 파워가 네트워크의 쪼개진 채굴 파워보다 커지게 되면 쉽게 51% 공격을 개시할 수 있습니다.

### **N - 컨펌 이중 지불(N-Confirmation Double Spending)**

일반적으로 가게 주인이 물건을 팔고 송금을 받았을 때, 실제로 블록이 컨펌되기 전까지는 물건을 제공하지 않습니다. 블록이 재배열 될 수도 있기 때문입니다.

그러나, 이클립스 공격자에 의해 여러 채굴 노드들이 공격 대상이 되어 격리된 경우, 공격자는 자신의 트랜잭션을 이클립스 공격 대상인 채굴 노드에게 제공하여 블록체인에 추가하도록 합니다. 이 노드들은 이후에도 블록을 계속 생성하면서 공격자의 트랜잭션이 든 블록이 컨펌되도록 합니다.

이클립스 공격 대상이 된 가게 주인은 트랜잭션이 들어있는 블록이 컨펌되는 것을 보고 물건을 제공합니다. 이 후, 공격자가 격리된 노드들이 만든 블록체인을 전체 네트워크에 공유하면, 해당 블록체인의 노드들은 고아 블록이 되면서 트랜잭션 자체가 취소되게 됩니다.

## **이클립스 공격 대처 방법**

### **무작위 노드 선택(Random Node Selection)**

노드가 피어를 선택할 때 무작위가 아닌 경우, 공격자가 자신 주변의 노드를 공격 대상으로 선택할 수 있게 됩니다. 따라서 노드가 피어를 랜덤으로 선택하게 하여 공격자가 공격 대상 노드를 정하기 어렵도록 만들 수 있습니다.

### **정보 저장**

노드가 다른 노드에 대한 정보를 기억하도록 하면, 해당 노드가 네트워크를 떠났다가 재접속 했을 때 이전에 연결했던 정직한 노드와 연결하여 정직한 피어 관계를 지속할 수 있습니다.

### **연결 수 늘리기**

하나의 노드에 연결된 피어의 갯수를 늘리면, 노드가 정직한 노드에게 연결될 가능성 역시 높아집니다.