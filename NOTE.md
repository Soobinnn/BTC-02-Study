# 블록체인의 구성

- 블록헤더 : 
    블록의 정체성 
        - 비전, 이전 블록의 해시 - 블록들과 연결되어 있음을 나타내는, 이전 블록의 해시값을 갖는 데이터
        - 난이도, 타임스탬프, 난스 - 채굴 경쟁과 직접 연관이 있는부분
        - Merkle Root

- 거래 카운터

- 거래 : 블록에 기록된 거래내역

## 머클루트 (Merkle Root)란?

머클 트리는 이진트리(binary trees)라는 이름으로도 알려져 있다.
여기서 이진트리는 거래를 두개씩 묶는다는 말.

// 그림

두 개씩 거래를 묶은 다음 알고리즘을 통해 해시값으로 나타내고, 또 그렇게 묶은 값들을 다시 두개씩 묶어서 또 해싱하여 
수 백개의 거래 값들을 그림의 가장 꼭대기에 위치한 하나의 데이터로 만들어주는 것.
(거래가 몇 십개, 몇 백개, 몇천개든 뭉쳐서 요약된 머클루트의 용량은 32비트로 항상 같다.)

이렇게 두개씩 묶어서 올라가게 되면 거래량이 기하급수적으로 늘어나도, 특정 거래를 찾는 경로는 단순하다. 라는 이점이 있다.
거래 건수인 N이 증가할 떄마다 특정 거래의 경로를 찾는 경우의 수는 log2(N)으로 늘어나기 때문이다.

1024개의 거래라고 해도 해싱이 되는 과정은 log2(1024) 즉, 10번이었으므로 열번의 경로를 찾아가는 연산을 하면 특정 거래 데이터를 쉽게 찾을 수 있다.
그렇기에 거래 내역을 위조하려는 시도가 있어도 머클트리의 경로를 따라가면, 해시값이 다른 것이 나오게 되어 **위변조도 쉽고 빠르게 알 수 있게 되고** 이를 방지할 수 있다.

/* 블록체인의 용량은 시간이 지날수록 지속적으로 늘어나기 때문에 이제는 성능이 좋은 컴퓨터만 모든 블록체인을 다운받는 full node가 될 수 있다.
하지만, 이 머클트리의 이진트리 방식은 블록데이터의 일부만 다운받는 light node로 우리가 가지고 다니는 모바일로도 쉽게 빠르게 특정 거래를 찾도록 해준다.

## 해시레이트(hashrate)

연산 처리능력을 측정하는 단위로, 해시 속도를 의미.
PoW 합의 알고리즘을 사용하는 모든 암호화폐에서 나타나며, 일반적으로 해시레이트가 높아져 연상량이 많아질 경우,
더 빠른 채굴이 이러우지기 때문에 채굴 난이도가 높아진다. 해시레이트는 시간이 흐를수록, 참여자가 늘어날수록 상승.

ex) 비트코인이 1000 해시를 요구하고 채굴 작업이 100을 제공한다면 코인의 10%를 받고 더 적은 수수료가 발생하게 된다. 
다음 코인에 2000 해시를 요구하는데 여전히 100만을 제공한다면 수익은 5%가 될 것이다
이런식으로 채굴 난이도가 올라갈수록 해시레이트를 향상시킬수 없다면 수익은 계속 떨어지게 될 것이다.

해시레이트는 채굴 난이도와 같은 정방향의 값을 가진다. 
따라서 채굴 난이도가 높아진다는 의미는 해시레이트가 저하된다는 것이고 이는 곧 단위 시간당 생산할 수 있는 채굴량이 줄어든다는 의미


## ECDSA
디지털서명 (ECDSA)알고리즘을 이용하여 이더리움은 트랜잭션을 서명함.

비트코인은 secp256k1 곡선을 사용함.


4개 후보중 어떤 공개키를 써야하는지를 트랜잭션에 포함시켜서 보냄.



* POW < POS < DPOS
속도가 무조건 빠른건아니다.
노드의 볼륨에 따라 속도는 다를 수 있다.
ex) pow라도 노드가 적으면 빠르다.

* dappradar.com

## BFT , PBFT 차이

실용적 비잔틴 장애 허용(pBFT, Practical Byzantine Fault Tolerance) 합의 구조는 1982년 "The Byzantine Generals Problem" 논문에서 처음 제안되었고, 
역할은 비잔틴 장애허용(BFT) 방식과 일치.

가장 간단하게 말해서 '동기식' 시스템에서만 동작이 가능한 방식이 BFT 방식이며,
이런 제한을 해결하며 '비동기식' 시스템 내에서 구현될 수 있게 했고 또한, 느린 속도를 보완하며 블록체인에서 사용되는 솔루션으로 채택

일반적으로 실용적 비잔틴 장애 허용 합의 구조 방식에서 시스템에 방해가 되는 악의적인 노드 또는 비정상 노드가 (N-1)/3개 이상이 아닌 경우 시스템은 정상적으로 동작하며 
해킹이나 외부 공격에 대해 방어가 가능하다 라고 말할 수 있다.